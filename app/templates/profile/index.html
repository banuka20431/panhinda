{% extends 'base.html' %}

{% block body %}

{% include 'partials/navbar.html' %}

<div class="max-w-3xl mx-auto mt-8 p-6 bg-neutral-100 rounded-lg shadow-md border border-neutral-200">
    <div class="flex flex-col md:flex-row items-center gap-8">
        <form action="{{ url_for('profile.update_profile_picture') }}" method="post" enctype="multipart/form-data" class="flex flex-col items-center">
            <div class="relative group">
                <img src="{{ url_for('static', filename='user_data/profiles/default.png') }}" alt="profile picture"
                    class="w-28 h-28 rounded-full border-4 border-neutral-400 object-cover shadow">
                <label for="file-input" class="absolute inset-0 flex items-center justify-center bg-neutral-800 bg-opacity-60 text-amber-200 opacity-0 group-hover:opacity-100 rounded-full cursor-pointer transition"></label>
                    Upload
                    <input id="file-input" type="file" name="pro_pic" accept="image/*" class="hidden">
                </label>
            </div>
            <input type="submit" value="Update Profile Picture" class="mt-3 px-4 py-1 rounded bg-amber-500 text-neutral-800 font-semibold hover:bg-amber-400 transition">
        </form>
        <div class="flex flex-col items-center md:items-start">
            <span class="text-lg font-bold text-neutral-800">@{{current_user.username}}</span>
        </div>
    </div>
    <div class="flex justify-around mt-8 bg-neutral-200 rounded-lg p-4"></div>
        <div class="flex flex-col items-center">
            <span class="text-neutral-800 font-semibold">Articles Wrote</span>
            <span class="text-amber-500 text-xl font-bold">{{ created_article_count }}</span>
        </div>
        <div class="flex flex-col items-center">
            <span class="text-neutral-800 font-semibold">Total Likes Gained</span>
            <span class="text-amber-500 text-xl font-bold">{{ gained_likes_count }}</span>
        </div>
    </div>
</div>

<div class="max-w-3xl mx-auto mt-6 flex flex-wrap gap-3 justify-center">
    <a href="/profile/personal-info"></a>
        <button class="px-4 py-2 rounded bg-neutral-400 text-neutral-800 font-medium hover:bg-amber-500 hover:text-neutral-900 transition">Personal Info</button>
    </a>
    <a href="/profile/my-articles"></a>
        <button class="px-4 py-2 rounded bg-neutral-400 text-neutral-800 font-medium hover:bg-amber-500 hover:text-neutral-900 transition">My Articles</button>
    </a>
    <a href="/profile/my-interests"></a>
        <button class="px-4 py-2 rounded bg-neutral-400 text-neutral-800 font-medium hover:bg-amber-500 hover:text-neutral-900 transition">My Interests</button>
    </a>
    <a href="/profile/liked-articles"></a>
        <button class="px-4 py-2 rounded bg-neutral-400 text-neutral-800 font-medium hover:bg-amber-500 hover:text-neutral-900 transition">Liked Articles</button>
    </a>
    <a href="/profile/authentication"></a>
        <button class="px-4 py-2 rounded bg-neutral-400 text-neutral-800 font-medium hover:bg-amber-500 hover:text-neutral-900 transition">Authentication</button>
    </a>
    <a href="/profile/change-password">
        <button class="px-4 py-2 rounded bg-neutral-400 text-neutral-800 font-medium hover:bg-amber-500 hover:text-neutral-900 transition">Change Password</button>
    </a>
    <a href="/profile/delete-account">
        <button class="px-4 py-2 rounded bg-red-500 text-white font-medium hover:bg-red-600 transition">Delete Account</button>
    </a>
</div>

<div class="max-w-3xl mx-auto mt-8 bg-neutral-100 rounded-lg shadow p-6 min-h-[200px]">
    {% if sub_route == 'personal_info' %}
        {% include 'profile/partials/personal_info.html' %}
    {% elif sub_route == 'my_articles' %}
        {% include 'profile/partials/my_articles.html' %}
    {% elif sub_route == 'my_interests' %}
        {% include 'profile/partials/my_interests.html' %}
    {% elif sub_route == 'liked_articles' %}
        {% for article in liked_articles %}
            <p class="mb-2">
                <a href="{{ url_for('articles.view_article', article_id=article.id) }}" class="text-amber-500 hover:underline">{{ article.title }}</a>
                <span class="text-neutral-800">by {{authors[loop.index0]}}</span>
            </p>
        {% endfor %}
    {% endif %}
</div>

{% endblock %}
